<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .note-card {
            transition: all 0.3s ease;
        }
        
        .note-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .flash-message {
            animation: slideDown 0.5s ease-out;
        }
        
        @keyframes slideDown {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Flash Messages -->
    <div id="flashMessages" class="fixed top-4 right-4 z-50"></div>
    
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-2xl font-bold text-indigo-600">ðŸ“š Notes Portal</h1>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="homeBtn" class="text-gray-700 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Home</button>
                    <button id="contactBtn" class="text-gray-700 hover:text-indigo-600 px-3 py-2 rounded-md text-sm font-medium">Contact</button>
                    <button id="clearDataBtn" class="text-red-600 hover:text-red-700 px-3 py-2 rounded-md text-sm font-medium">Clear Data</button>
                    <div id="authButtons" class="flex space-x-2">
                        <button id="loginBtn" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium">Login</button>
                        <button id="registerBtn" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md text-sm font-medium">Register</button>
                    </div>
                    <div id="userMenu" class="hidden flex items-center space-x-2">
                        <span id="userName" class="text-gray-700 text-sm"></span>
                        <button id="uploadBtn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md text-sm font-medium">Upload Note</button>
                        <button id="logoutBtn" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Home Page -->
        <div id="homePage" class="fade-in">
            <!-- Hero Section -->
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Welcome to Notes Portal</h2>
                <p class="text-xl text-gray-600 mb-8">Share and discover educational notes from students worldwide</p>
                
                <!-- Search Bar -->
                <div class="max-w-md mx-auto">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Search notes by title or topic..." 
                               class="w-full px-4 py-3 pl-12 pr-4 text-gray-700 bg-white border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200">
                        <div class="absolute inset-y-0 left-0 flex items-center pl-4">
                            <i class="fas fa-search text-gray-400"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Notes Grid -->
            <div id="notesGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Notes will be populated here -->
            </div>
            
            <div id="noNotesMessage" class="text-center py-12 hidden">
                <i class="fas fa-file-alt text-6xl text-gray-300 mb-4"></i>
                <p class="text-xl text-gray-500">No notes found matching your search.</p>
            </div>
        </div>

        <!-- Login Page -->
        <div id="loginPage" class="hidden fade-in">
            <div class="max-w-md mx-auto bg-white rounded-lg shadow-md p-8">
                <h2 class="text-2xl font-bold text-center text-gray-900 mb-8">Login to Your Account</h2>
                <form id="loginForm">
                    <div class="mb-4">
                        <label for="loginEmail" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                        <input type="email" id="loginEmail" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div class="mb-6">
                        <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <input type="password" id="loginPassword" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md">
                        Sign In
                    </button>
                </form>
                <div class="mt-6">
                    <div class="relative">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-300"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-2 bg-white text-gray-500">Or continue with</span>
                        </div>
                    </div>
                    <button id="googleLoginBtn" class="mt-4 w-full bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md flex items-center justify-center">
                        <i class="fab fa-google mr-2"></i>
                        Sign in with Google
                    </button>
                </div>
                <p class="mt-4 text-center text-sm text-gray-600">
                    Don't have an account? 
                    <button id="switchToRegister" class="text-indigo-600 hover:text-indigo-500 font-medium">Sign up</button>
                </p>
            </div>
        </div>

        <!-- Register Page -->
        <div id="registerPage" class="hidden fade-in">
            <div class="max-w-md mx-auto bg-white rounded-lg shadow-md p-8">
                <h2 class="text-2xl font-bold text-center text-gray-900 mb-8">Create Your Account</h2>
                <form id="registerForm">
                    <div class="mb-4">
                        <label for="registerName" class="block text-sm font-medium text-gray-700 mb-2">Full Name</label>
                        <input type="text" id="registerName" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div class="mb-4">
                        <label for="registerEmail" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label>
                        <input type="email" id="registerEmail" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div class="mb-6">
                        <label for="registerPassword" class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <input type="password" id="registerPassword" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md">
                        Create Account
                    </button>
                </form>
                <div class="mt-6">
                    <div class="relative">
                        <div class="absolute inset-0 flex items-center">
                            <div class="w-full border-t border-gray-300"></div>
                        </div>
                        <div class="relative flex justify-center text-sm">
                            <span class="px-2 bg-white text-gray-500">Or continue with</span>
                        </div>
                    </div>
                    <button id="googleRegisterBtn" class="mt-4 w-full bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-md flex items-center justify-center">
                        <i class="fab fa-google mr-2"></i>
                        Sign up with Google
                    </button>
                </div>
                <p class="mt-4 text-center text-sm text-gray-600">
                    Already have an account? 
                    <button id="switchToLogin" class="text-indigo-600 hover:text-indigo-500 font-medium">Sign in</button>
                </p>
            </div>
        </div>

        <!-- Upload Page -->
        <div id="uploadPage" class="hidden fade-in">
            <div class="max-w-md mx-auto bg-white rounded-lg shadow-md p-8">
                <h2 class="text-2xl font-bold text-center text-gray-900 mb-8">Upload a Note</h2>
                <form id="uploadForm">
                    <div class="mb-4">
                        <label for="noteTitle" class="block text-sm font-medium text-gray-700 mb-2">Note Title</label>
                        <input type="text" id="noteTitle" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div class="mb-4">
                        <label for="noteTopic" class="block text-sm font-medium text-gray-700 mb-2">Topic/Subject</label>
                        <input type="text" id="noteTopic" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div class="mb-6">
                        <label for="noteFile" class="block text-sm font-medium text-gray-700 mb-2">Upload File</label>
                        <input type="file" id="noteFile" accept=".pdf,.ppt,.pptx,.doc,.docx,.txt" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        <p class="text-xs text-gray-500 mt-1">Accepted formats: PDF, PPT, PPTX, DOC, DOCX, TXT</p>
                    </div>
                    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md">
                        Upload Note
                    </button>
                </form>
                <button id="cancelUpload" class="w-full mt-3 bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-md">
                    Cancel
                </button>
            </div>
        </div>

        <!-- Contact Page -->
        <div id="contactPage" class="hidden fade-in">
            <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-md p-8">
                <h2 class="text-2xl font-bold text-center text-gray-900 mb-8">Contact Us</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Get in Touch</h3>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <i class="fas fa-envelope text-indigo-600 mr-3"></i>
                                <span>support@notesportal.com</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-phone text-indigo-600 mr-3"></i>
                                <span>+1 (555) 123-4567</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-map-marker-alt text-indigo-600 mr-3"></i>
                                <span>123 Education St, Learning City, LC 12345</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Office Hours</h3>
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span>Monday - Friday:</span>
                                <span>9:00 AM - 6:00 PM</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Saturday:</span>
                                <span>10:00 AM - 4:00 PM</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Sunday:</span>
                                <span>Closed</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Application State with Local Storage (acts as database)
        let currentUser = JSON.parse(localStorage.getItem('notesPortalUser')) || null;
        
        // Initialize notes from localStorage or use sample data
        let notes = JSON.parse(localStorage.getItem('notesPortalNotes')) || [
            {
                id: 1,
                title: "Introduction to Calculus",
                topic: "Mathematics",
                author: "John Smith",
                uploadDate: "2024-01-15",
                fileType: "pdf",
                downloads: 245,
                fileData: null, // Sample notes don't have actual files
                fileName: "calculus_intro.pdf"
            },
            {
                id: 2,
                title: "Organic Chemistry Basics",
                topic: "Chemistry",
                author: "Sarah Johnson",
                uploadDate: "2024-01-12",
                fileType: "pptx",
                downloads: 189,
                fileData: null,
                fileName: "organic_chemistry.pptx"
            },
            {
                id: 3,
                title: "World War II History",
                topic: "History",
                author: "Mike Davis",
                uploadDate: "2024-01-10",
                fileType: "pdf",
                downloads: 156,
                fileData: null,
                fileName: "wwii_history.pdf"
            }
        ];
        let filteredNotes = [...notes];

        // Database-like functions using localStorage
        function saveNotesToStorage() {
            localStorage.setItem('notesPortalNotes', JSON.stringify(notes));
        }

        function saveUserToStorage() {
            localStorage.setItem('notesPortalUser', JSON.stringify(currentUser));
        }

        function clearStorage() {
            localStorage.removeItem('notesPortalNotes');
            localStorage.removeItem('notesPortalUser');
            location.reload();
        }

        // DOM Elements
        const pages = {
            home: document.getElementById('homePage'),
            login: document.getElementById('loginPage'),
            register: document.getElementById('registerPage'),
            upload: document.getElementById('uploadPage'),
            contact: document.getElementById('contactPage')
        };

        // Navigation Functions
        function showPage(pageName) {
            Object.values(pages).forEach(page => page.classList.add('hidden'));
            pages[pageName].classList.remove('hidden');
            pages[pageName].classList.add('fade-in');
        }

        function updateAuthUI() {
            const authButtons = document.getElementById('authButtons');
            const userMenu = document.getElementById('userMenu');
            const userName = document.getElementById('userName');

            if (currentUser) {
                authButtons.classList.add('hidden');
                userMenu.classList.remove('hidden');
                userName.textContent = currentUser.name;
            } else {
                authButtons.classList.remove('hidden');
                userMenu.classList.add('hidden');
            }
        }

        function showFlashMessage(message, type = 'success') {
            const flashContainer = document.getElementById('flashMessages');
            const flashDiv = document.createElement('div');
            
            const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';
            flashDiv.className = `flash-message ${bgColor} text-white px-6 py-3 rounded-lg shadow-lg mb-2`;
            flashDiv.textContent = message;
            
            flashContainer.appendChild(flashDiv);
            
            setTimeout(() => {
                flashDiv.remove();
            }, 4000);
        }

        // Notes Functions
        function getFileIcon(fileType) {
            switch(fileType) {
                case 'pdf': return 'fas fa-file-pdf text-red-500';
                case 'ppt':
                case 'pptx': return 'fas fa-file-powerpoint text-orange-500';
                case 'doc':
                case 'docx': return 'fas fa-file-word text-blue-500';
                case 'txt': return 'fas fa-file-alt text-gray-500';
                default: return 'fas fa-file text-gray-500';
            }
        }

        function renderNotes() {
            const notesGrid = document.getElementById('notesGrid');
            const noNotesMessage = document.getElementById('noNotesMessage');
            
            if (filteredNotes.length === 0) {
                notesGrid.classList.add('hidden');
                noNotesMessage.classList.remove('hidden');
                return;
            }
            
            notesGrid.classList.remove('hidden');
            noNotesMessage.classList.add('hidden');
            
            notesGrid.innerHTML = filteredNotes.map(note => `
                <div class="note-card bg-white rounded-lg shadow-md p-6 border border-gray-200">
                    <div class="flex items-start justify-between mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">${note.title}</h3>
                            <p class="text-sm text-indigo-600 font-medium mb-1">${note.topic}</p>
                            <p class="text-xs text-gray-500">by ${note.author}</p>
                        </div>
                        <i class="${getFileIcon(note.fileType)} text-2xl"></i>
                    </div>
                    <div class="flex items-center justify-between text-xs text-gray-500 mb-4">
                        <span>Uploaded: ${new Date(note.uploadDate).toLocaleDateString()}</span>
                        <span><i class="fas fa-download mr-1"></i>${note.downloads}</span>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="downloadNote(${note.id})" 
                                class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md transition-colors">
                            <i class="fas fa-download mr-2"></i>Download
                        </button>
                        ${note.fileData ? '<span class="text-xs text-green-600 self-center">âœ“ File Available</span>' : '<span class="text-xs text-gray-400 self-center">Sample Note</span>'}
                    </div>
                </div>
            `).join('');
        }

        function filterNotes(searchTerm) {
            const term = searchTerm.toLowerCase();
            filteredNotes = notes.filter(note => 
                note.title.toLowerCase().includes(term) || 
                note.topic.toLowerCase().includes(term)
            );
            renderNotes();
        }

        function downloadNote(noteId) {
            const note = notes.find(n => n.id === noteId);
            if (note) {
                if (note.fileData) {
                    // Create and trigger download for uploaded files
                    const link = document.createElement('a');
                    link.href = note.fileData;
                    link.download = note.fileName || `${note.title}.${note.fileType}`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    note.downloads++;
                    saveNotesToStorage();
                    showFlashMessage(`Downloaded "${note.title}" successfully!`);
                } else {
                    // For sample notes without actual files
                    showFlashMessage(`"${note.title}" is a sample note - no file available for download.`, 'error');
                }
                renderNotes();
            }
        }

        // Event Listeners
        document.getElementById('homeBtn').addEventListener('click', () => showPage('home'));
        document.getElementById('contactBtn').addEventListener('click', () => showPage('contact'));
        document.getElementById('loginBtn').addEventListener('click', () => showPage('login'));
        document.getElementById('registerBtn').addEventListener('click', () => showPage('register'));
        document.getElementById('uploadBtn').addEventListener('click', () => showPage('upload'));
        document.getElementById('cancelUpload').addEventListener('click', () => showPage('home'));
        document.getElementById('clearDataBtn').addEventListener('click', () => {
            if (confirm('Are you sure you want to clear all data? This will remove all uploaded notes and user data.')) {
                clearStorage();
            }
        });

        document.getElementById('switchToRegister').addEventListener('click', () => showPage('register'));
        document.getElementById('switchToLogin').addEventListener('click', () => showPage('login'));

        document.getElementById('searchInput').addEventListener('input', (e) => {
            filterNotes(e.target.value);
        });

        // Form Handlers
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            // Simulate login with storage
            currentUser = { name: email.split('@')[0], email: email };
            saveUserToStorage();
            updateAuthUI();
            showFlashMessage('Logged in successfully!');
            showPage('home');
        });

        document.getElementById('registerForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            // Simulate registration with storage
            currentUser = { name: name, email: email };
            saveUserToStorage();
            updateAuthUI();
            showFlashMessage('Account created successfully!');
            showPage('home');
        });

        document.getElementById('uploadForm').addEventListener('submit', (e) => {
            e.preventDefault();
            const title = document.getElementById('noteTitle').value;
            const topic = document.getElementById('noteTopic').value;
            const file = document.getElementById('noteFile').files[0];
            
            if (file && currentUser) {
                const fileExtension = file.name.split('.').pop().toLowerCase();
                
                // Read file as base64 for storage
                const reader = new FileReader();
                reader.onload = function(e) {
                    const newNote = {
                        id: Date.now(), // Use timestamp for unique ID
                        title: title,
                        topic: topic,
                        author: currentUser.name,
                        uploadDate: new Date().toISOString().split('T')[0],
                        fileType: fileExtension,
                        downloads: 0,
                        fileData: e.target.result, // Store file data as base64
                        fileName: file.name
                    };
                    
                    notes.unshift(newNote);
                    filteredNotes = [...notes];
                    saveNotesToStorage(); // Save to localStorage
                    renderNotes();
                    showFlashMessage('Note uploaded and saved successfully!');
                    showPage('home');
                    
                    // Reset form
                    document.getElementById('uploadForm').reset();
                };
                reader.readAsDataURL(file);
            }
        });

        document.getElementById('googleLoginBtn').addEventListener('click', () => {
            // Simulate Google login
            currentUser = { name: 'Google User', email: 'user@gmail.com' };
            saveUserToStorage();
            updateAuthUI();
            showFlashMessage('Logged in with Google successfully!');
            showPage('home');
        });

        document.getElementById('googleRegisterBtn').addEventListener('click', () => {
            // Simulate Google registration
            currentUser = { name: 'Google User', email: 'user@gmail.com' };
            saveUserToStorage();
            updateAuthUI();
            showFlashMessage('Account created with Google successfully!');
            showPage('home');
        });

        document.getElementById('logoutBtn').addEventListener('click', () => {
            currentUser = null;
            localStorage.removeItem('notesPortalUser');
            updateAuthUI();
            showFlashMessage('Logged out successfully!');
            showPage('home');
        });

        // Initialize
        renderNotes();
        updateAuthUI();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97ab6a50463c3e27',t:'MTc1NzEzNDk1OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
